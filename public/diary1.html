<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Diary₊˚⊹ ᰔ</title>

<style>
/* ===== GLOBAL & 3D SHARED SETTINGS ===== */
* { box-sizing: border-box; }
img { image-rendering: pixelated; }
body { margin: 0; height: 100vh; font-family: "MS PGothic", "Tahoma", Geneva, sans-serif; perspective: 1600px; overflow: hidden; background: #000; }
.room { position: absolute; inset: 0; background: linear-gradient(to bottom, #fdeaf2 0%, #f8cfe1 55%, #caa3b4 56%, #b38b9b 100%); }
.desk { position: absolute; bottom: 0; width: 100%; height: 38%; background: linear-gradient(#caa08c, #a97c65); box-shadow: inset 0 20px 40px rgba(0,0,0,0.25); }

/* ===== LAPTOP ===== */
.laptop-3d {
    width: 1200px; height: 900px;
    position: absolute; left: 50%; top: 50%;
    transform: translate(-50%, -50%) rotateX(18deg) translateY(50px);
    transform-style: preserve-3d;
}

.screen-shell {
    width: 100%; height: 80%;
    background: linear-gradient(#ffd9eb, #f6bcd3);
    border-radius: 18px; padding: 18px;
    box-shadow: 0 60px 120px rgba(0,0,0,0.45);
}

.screen-frame {
    background: #fff3f9; height: 100%;
    padding: 14px; border-radius: 10px;
    box-shadow: inset 0 0 0 3px #ffb3d9;
}

.screen { position: relative; height: 100%; background: linear-gradient(#fffdfc, #ffeef6); overflow: hidden; }

.blog-window { position: absolute; inset: 10px; bottom: 45px; background-color: #996855; border: 4px solid #f8accf; display: flex; flex-direction: column; z-index: 10; }
.blog-titlebar { background: linear-gradient(#ffd6ea, #ffb7d9); padding: 6px 10px; display: flex; justify-content: space-between; font-weight: bold; color: #692f1a; font-size: 14px; border-bottom: 2px solid #ff9acb; }
.blog-scroll-area { flex: 1; overflow-y: auto; background-image: url("https://i.pinimg.com/736x/28/d8/2a/28d82a402a6f78e40d10bcf2c2fcc33f.jpg"); padding: 15px; }

/* ===== DIARY CONTENT ===== */
.Header { width: 100%; height: 130px; border: 3px solid #e19c91; margin-bottom: 12px; background: #fffede; overflow: hidden; }
.Header img { width: 100%; height: 100%; object-fit: cover; }
.Divider { width: 100%; height: 35px; border: 2px solid #e19c91; margin-bottom: 12px; background: #fffede; }
.Divider img { width: 100%; height: 100%; object-fit: cover; }

.flex-container1, .flex-container2 { display: flex; gap: 12px; margin-bottom: 12px; }
.Directory, .TableOfContents, .Comments { background-color: #e19c91; border: 3px solid #996855; padding: 12px; color: #692f1a; }
.Directory { flex: 3; flex-shrink: 0; }
.TableOfContents { flex: 7; text-align: center; }
.Comments { min-width: 327px; flex-shrink: 0; }

/* ===== 3D DIARY BOOK MECHANICS ===== */
.diary-viewport { perspective: 1200px; flex: 7; display: flex; justify-content: center; align-items: center; min-height: 380px; }

.diary-book {
    width: 325px; height: 340px;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.8s ease, width 0.8s ease;
}

.book-open { width: 650px; }

.diary-spine {
    position: absolute; left: 50%; top: 0; bottom: 0;
    width: 16px; background: #865543; z-index: 15;
    transform: translateX(-8px); display: none;
    box-shadow: inset 0 0 10px rgba(0,0,0,0.5);
}
.book-open .diary-spine { display: block; }

.diary-cover {
    position: absolute; right: 0; width: 325px; height: 100%;
    background: #fdb1bf; border: 3px solid #996855;
    border-radius: 4px 10px 10px 4px; z-index: 30;
    transform-origin: left; transition: transform 1s cubic-bezier(0.4, 0, 0.2, 1);
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    cursor: pointer; backface-visibility: hidden; box-shadow: 5px 5px 15px rgba(0,0,0,0.2);
}
.book-open .diary-cover { transform: rotateY(-180deg); pointer-events: none; }

.diary-pages-spread {
    position: absolute; inset: 0; display: flex;
    z-index: 10; opacity: 0; transition: opacity 0.5s;
    pointer-events: none; transform-style: preserve-3d;
}
.book-open .diary-pages-spread { opacity: 1; pointer-events: auto; }

.page-left, .page-right {
    flex: 1; background: #fffede; border: 1px solid #996855;
    padding: 15px; position: relative; transform-style: preserve-3d;
}
.page-left { border-radius: 10px 0 0 10px; border-right: none; }
.page-right { border-radius: 0 10px 10px 0; border-left: 1px solid #d4a391; }

/* FIX: Page Turn Animation */
.page-turning-effect { 
    animation: pageTurn 0.6s ease-in-out forwards; 
    transform-origin: left center;
}

@keyframes pageTurn {
    0% { transform: rotateY(0deg); opacity: 1; }
    100% { transform: rotateY(-90deg); opacity: 0; }
}

.bookmarks {
    position: absolute; right: -25px; top: 20px;
    display: flex; flex-direction: column; gap: 5px; z-index: 5;
}
.bookmark-tab {
    width: 35px; height: 22px; background: #e19c91;
    border: 2px solid #996855; border-left: none;
    font-size: 9px; font-weight: bold; cursor: pointer;
    display: flex; align-items: center; justify-content: flex-end;
    padding-right: 5px; border-radius: 0 5px 5px 0;
}

/* UI Elements */
h1 { font-size: 13px; color: #fffede; text-align: center; margin: 0 0 10px; background: #996855; padding: 2px; }
button { background-color: #fdb1bf; border: 2px solid #996855; padding: 6px; width: 100%; margin-bottom: 6px; cursor: pointer; font-weight: bold; color: #692f1a; }
.redacted { background: #692f1a; color: #692f1a; cursor: help; }
.redacted:hover { background: transparent; color: #ff0000; font-weight: bold; }
.live-indicator { font-size: 10px; color: #ff0000; animation: blink 1s infinite; font-weight: bold; }
@keyframes blink { 50% { opacity: 0; } }

.taskbar { position: absolute; bottom: 0; left: 0; right: 0; height: 36px; background: linear-gradient(#ffb7d9, #ff93c6); border-top: 2px solid #ff6fb3; display: flex; align-items: center; justify-content: space-between; padding: 0 10px; z-index: 500; }
.task-btn { background: linear-gradient(#fff, #ffd6ea); border: 2px solid #ff6fb3; border-radius: 6px; padding: 4px 10px; font-weight: bold; cursor: pointer; color: #7a2f55; }
.keyboard { width: 1250px; height: 300px; background: linear-gradient(#ffd1e8, #f3a9c8); margin-top: -14%; margin-left: 20.5%; position: absolute; border-radius: 0 0 26px 26px; transform: rotateX(75deg) translateZ(-50px) translateX(-21%); box-shadow: 0 80px 100px rgba(0,0,0,0.4); }
</style>
</head>

<body>
<div class="room"></div><div class="desk"></div>

<div class="laptop-3d">
    <div class="screen-shell">
        <div class="screen-frame">
            <div class="screen">
                <div class="blog-window">
                    <div class="blog-titlebar">
                        <span>✿ Clemmy's Corner - Public Diary ✿</span>
                        <span style="cursor:pointer;">[ X ]</span>
                    </div>
                    
                    <div class="blog-scroll-area">
                        <div class="Header"><img src="https://64.media.tumblr.com/3b7e48caed4da480110eff58a9b8f851/f68b1ecfcc71eb9c-da/s250x400/a77da1387f446ad85049fc55a4061b0b51157841.gif"></div>
                        <div class="Divider"><img src="https://i5.glitter-graphics.org/pub/726/726615qqay0z8qmb.gif"></div>

                        <div class="flex-container1">
                            <div class="Directory">
                                <h1>DIRECTORY</h1>
                                <button>Home</button>
                                <button onclick="flipToPage(0)">Diary</button>
                                <button>Shrines</button>
                                <button>Guestbook</button>
                            </div>
                            <div class="TableOfContents">
                                <h1>TABLE OF CONTENTS</h1>
                                <p class="live-indicator">● LIVE VIEWERS: 12,482</p>
                                <div id="tocLinks"></div>
                            </div>
                        </div>

                        <div class="flex-container2">
                            <div class="Comments">
                                <h1>COMMENTS</h1>
                                <p id="commentForEntry" style="font-weight:bold; font-size:9px;"></p>
                                <textarea id="newComment" placeholder="Leave a nice gift..."></textarea>
                                <button onclick="saveComment()">Add Comment</button>
                                <div id="commentsContainer"></div>
                            </div>
                            
                            <div class="diary-viewport">
                                <div class="diary-book" id="myBook">
                                    <div class="diary-cover" onclick="toggleBook()">
                                        <p style="font-size: 8px;">✧ click to open ✧</p>
                                    </div>
                                    <div class="bookmarks" id="bookmarkLinks"></div>
                                    <div class="diary-spine"></div>
                                    <div class="diary-pages-spread">
                                        <div class="page-left" id="pageLeft"></div>
                                        <div class="page-right" id="pageRight">
                                            <div id="pageContentRight">
                                                <h2 style="margin-top: 50px; font-size: 14px; text-align: center;">Select an entry...</h2>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="Footer">© 2026 Clemmy’s Corner — Made With Love ♡</div>
                    </div>
                </div>

                <div class="taskbar">
                    <div class="taskbar-left">
                        <button class="task-btn">Start</button>
                    </div>
                    <div id="clock" style="font-weight: bold; color: #7a2f55;"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="keyboard"></div>
</div>

<script>
let currentPageIndex = 0;
let isBookOpen = false;

const journalEntries = [
    { date: "02/01", title: "ENTRY #01: BEST. GIFT. EVER. ✿", content: `<p>Omg, Sarah found a vintage laptop with <b>ClemmyOS</b>! It smells like <span class="redacted">burnt plastic and blood</span>.</p>` },
    { date: "02/03", title: "ENTRY #02: DECORATING", content: `<p>Sanrio stickers everywhere! But the fan sounds like <span class="redacted">breathing</span>.</p>` },
    { date: "02/20", title: "ENTRY #10: THE END", content: `<p style="color:red;">44.2321° N, 76.4951° W</p><p>I am safe now in the circuit.</p>` }
];

function toggleBook() {
    const book = document.getElementById('myBook');
    isBookOpen = !isBookOpen;
    if (isBookOpen) {
        book.classList.add('book-open');
        flipToPage(currentPageIndex);
    } else {
        book.classList.remove('book-open');
    }
}

function flipToPage(index) {
    if (!isBookOpen) toggleBook();
    const pageRight = document.getElementById('pageRight');
    
    // Trigger animation
    pageRight.classList.remove('page-turning-effect');
    void pageRight.offsetWidth; 
    pageRight.classList.add('page-turning-effect');
    
    setTimeout(() => {
        currentPageIndex = index;
        const entry = journalEntries[index];
        document.getElementById('pageLeft').innerHTML = `
            <h1 style="background:none; color:#692f1a; border-bottom:2px solid #996855; margin-top:40px; font-size:11px;">${entry.title}</h1>
            <p style="text-align:center; font-style:italic; font-size:10px;">Date: ${entry.date}</p>
        `;
        document.getElementById('pageContentRight').innerHTML = `<div style="margin-top:10px;">${entry.content}</div>`;
        pageRight.classList.remove('page-turning-effect');
        loadComments();
    }, 300);
}

window.onload = function() {
    const tocBox = document.getElementById('tocLinks');
    const bookmarkBox = document.getElementById('bookmarkLinks');
    journalEntries.forEach((entry, index) => {
        const tocItem = document.createElement('p');
        tocItem.style.cssText = "text-align: left; cursor: pointer; font-size: 10px; margin: 4px 0;";
        tocItem.innerHTML = `#${index+1} - <span class="redacted">${entry.title}</span>`;
        tocItem.onclick = () => flipToPage(index);
        tocBox.appendChild(tocItem);

        const tab = document.createElement('div');
        tab.className = "bookmark-tab";
        tab.textContent = "#" + (index + 1);
        tab.onclick = (e) => { e.stopPropagation(); flipToPage(index); };
        bookmarkBox.appendChild(tab);
    });
    setInterval(() => {
        const d = new Date();
        document.getElementById('clock').textContent = d.toLocaleTimeString();
    }, 1000);
};

function saveComment() {
    const text = document.getElementById('newComment').value;
    if (!text) return;
    let all = JSON.parse(localStorage.getItem('diaryMap')) || {};
    if (!all[currentPageIndex]) all[currentPageIndex] = [];
    all[currentPageIndex].push({text, date: new Date().toLocaleDateString()});
    localStorage.setItem('diaryMap', JSON.stringify(all));
    document.getElementById('newComment').value = "";
    loadComments();
}

function loadComments() {
    const container = document.getElementById('commentsContainer');
    let all = JSON.parse(localStorage.getItem('diaryMap')) || {};
    const current = all[currentPageIndex] || [];
    container.innerHTML = current.map(c => `<div class="comment-box"><p>${c.text}</p></div>`).join('');
}
</script>
</body>
</html>